resource "aws_route53_record" "redis" {
  zone_id = "${data.aws_route53_zone.selected.zone_id}"
{% if project_deployment_environment == 'prod' %}
  name = "redis.{{ project_name }}.${data.aws_route53_zone.selected.name}"
{% else %}
  name = "redis.{{ project_deployment_environment }}.{{ project_name }}.${data.aws_route53_zone.selected.name}"
{% endif %}
  type = "CNAME"

  ttl = 300
  records = ["${aws_elasticache_replication_group.this.primary_endpoint_address}"]
  depends_on = ["aws_elasticache_replication_group.this"]
}
